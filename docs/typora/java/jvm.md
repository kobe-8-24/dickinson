## 虚拟机

###  jvm内存模型

- class文件经过类加载器,  进入运行时数据区
- 运行时数据区 可分为 线程共享、线程私有

​       线程共享：

​						堆

```markdown

```

​						方法区

```markdown

```

​       线程私有：

​						程序计数器

```markdown
- 线程切换记录偏移位置
- 字节码执行引擎对其操作修改
```

​						虚拟机栈

​						本地方法栈

- 堆内存

  新生代

  ​			Eden区

  ​			survivor区 - from区、to区（分区解决内存碎片化）

  老年代

- 堆栈以帧(**栈帧**)为单位保存线程的状态

- jvm对堆栈只进行两种操作：**以帧为单位的压栈和出栈操作**

- **一个方法对应一块栈帧内存区域**：局部变量表、操作数栈、动态链接、方法出口

- javap 反汇编 查看 jvm指令手册

### gc

- gc为啥最多15次 - 表示gc年龄的是4位, 最大15次

- 本地模拟gc - 死循环

- gc问题排查过程

- bit、byte、kb、mb换算

- 手动gc - system.gc()

- gc原理

- 性能调优

- 内存逃逸分析

- 内存溢出

- 内存泄漏

- 垃圾回收

  双亲委派机制

  引用计数、可达性分析

  垃圾收集器 - G1、CMS
  
  ```markdown
  CMS垃圾回收算法
  
  
  缺点：对内存太敏感、容易产生碎片、不能解决浮动垃圾
  
  
  ```
  
  ```markdown
  G1
  ```
  
  

### java自带命令

- jconsole

- jmap

- jstack

- jps

- jstat

- jprofiler

- jprobe

- yourkit

- jhat

- javap

  
