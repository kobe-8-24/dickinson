数据库事务
四大特性：ACID
原子性: 构成事务的所有操作，要么都执行完成，要么全部不执行，不可能出现部分成功部分失败的情况。
一致性: 在事务执行前后，数据库的一致性约束没有被破坏。比如：张三向李四转 100 元，转账前和转账后的数据是正确状态这叫一致性，如果出现张三转出 100 元，李四账户没有增加 100 元这就出现了数据错误，就没有达到一致性。
隔离性: 数据库中的事务一般都是并发的，隔离性是指并发的两个事务的执行互不干扰，一个事务不能看到其他事务的运行过程的中间状态。通过配置事务隔离级别可以比避免脏读、重复读问题。
持久性：事务完成之后，该事务对数据的更改会持久到数据库，且不会被回滚。

CAP理论
一致性：一致性是指写操作后的读操作可以读取到最新的数据状态，当数据分布在多个节点上，从任意结点读取到的数据都是最新的状态。
可用性：可用性是指任何事务操作都可以得到响应结果，且不会出现响应超时或响应错误。
分区容错性：通常分布式系统的各各结点部署在不同的子网，这就是网络分区，不可避免的会出现由于网络问题而导致结点之间通信失败，此时仍可对外提供服务，这叫分区容忍性

BASE理论
BASE理论解决CAP理论提出了分布式系统的一致性和可用性不能兼得的问题。
BA：Basically Available，基本可用
系统出现了不可预知的故障，但还是能用，相比较正常的系统而言会有响应时间上的损失和功能上的损失。
S：Soft State，软状态，状态可以有一段时间不同步
什么是软状态呢？相对于原子性而言，要求多个节点的数据副本都是一致的，这是一种“硬状态”。
软状态指的是：允许系统中的数据存在中间状态，并认为该状态不影响系统的整体可用性，即允许系统在多个不同节点的数据副本存在数据延时
E：Eventually Consistent，最终一致，最终数据是一致的就可以了，而不是时时保持强一致。

2pc
准备阶段（Prepare phase）：事务管理器给每个参与者发送 Prepare 消息，每个数据库参与者在本地执行事务，并写本地的 Undo/Redo 日志，此时事务没有提交。（Undo 日志是记录修改前的数据，用于数据库回滚，Redo 日志是记录修改后的数据，用于提交事务后写入数据文件）
提交阶段（commit phase）：如果事务管理器收到了参与者的执行失败或者超时消息时，直接给每个参与者发送回滚（Rollback）消息；否则，发送提交（Commit）消息；参与者根据事务管理器的指令执行提交或者回滚操作，并释放事务处理过程中使用的锁资源。注意：必须在最后阶段释放锁资源。

3pc
就是除了引入超时机制之外，3PC把2PC的准备阶段再次一分为二，这样三阶段提交就有CanCommit、PreCommit、DoCommit三个阶段。

xa
需要本地数据库支持XA协议。
资源锁需要等到两个阶段结束才释放，性能较差

seata
全局事务

tcc
TCC需要注意三种异常处理分别是空回滚、幂等、悬挂

hmily

saga

本地消息表 + job轮询

mq事务消息rocketmq

最大努力通知
发起通知方通过一定的机制最大努力将业务处理结果通知到接收方。

dtm
DTM 是一款 golang 开发的分布式事务管理器，解决了跨数据库、跨服务、跨语言栈更新数据的一致性问题。




